!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t,a){},function(e,t,a){"use strict";a.r(t);a(0);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,i=void 0;try{for(var l,d=e[Symbol.iterator]();!(n=(l=d.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyModificator={ctrl:!1,alt:!1,virtualShift:!1,capsLock:!1},this.ruPattern='ё 1|! 2|" 3|№ 4|; 5|% 6|: 7|? 8|* 9|( 0|) -|_ =|+\nй ц у к е н г ш щ з х ъ \\|/\nф ы в а п р о л д ж э\nя ч с м и т ь б ю .|,',this.enPattern="`|~ 1|! 2|@ 3|# 4|$ 5|% 6|^ 7|& 8|* 9|( 0|) -|_ =|+\nQ W E R T Y U I O P [|{ ]|} \\||\nA S D F G H J K L ;|: '|\"\nZ X C V B N M ,|< .|> /|?",this.keywords="Backspace,Tab, Delete,CapsLock,Enter, ShiftLeft, ArrowUp, ShiftRight, ControlLeft,Lang, MetaLeft, AltLeft,Space, AltRight, ArrowLeft, ArrowDown, ArrowRight, ControlRight",this.specialKeys=["Backquote","Minus","Equal","Backslash","Semicolon","Quote","Comma","Period","Slash","BracketLeft","BracketRight"],this.getArrFromStr=function(e){return e.split(",")},this.getKeyboardArrFromStr=function(e){for(var t=e.split("\n").map((function(e){return String(e).toLowerCase().split(" ")})),a=0;a<t.length;a+=1)for(var n=0;n<t[a].length;n+=1)String(t[a][n]).length>1&&String(t[a][n]).includes("|")&&(String(t[a][n]).includes("||")?t[a][n]=[String(t[a][n]).charAt(0),String(t[a][n]).charAt(String(t[a][n]).length-1)]:t[a][n]=String(t[a][n]).toLowerCase().split("|"));return t},this.defineSpecElem=function(e){switch(e){case"`":return t.specialKeys[0];case"-":return t.specialKeys[1];case"=":return t.specialKeys[2];case"\\":return t.specialKeys[3];case";":return t.specialKeys[4];case"'":return t.specialKeys[5];case",":return t.specialKeys[6];case".":return t.specialKeys[7];case"/":return t.specialKeys[8];case"[":return t.specialKeys[9];case"]":return t.specialKeys[10];default:return""}},this.getDefKeybrdObjs=function(e,a){for(var r=[],i=0;i<e.length;i+=1){for(var l=[],d=0;d<e[i].length;d+=1){var o=e[i][d],c=a[i][d],s={key:"",langVal:{ru:{initVal:"",additVal:"",type:""},en:{initVal:"",additVal:"",type:""}}};if("string"==typeof o)s.key="Key".concat(String(o).toUpperCase()),s.langVal.ru.initVal=c,s.langVal.ru.additVal=String(c).toUpperCase(),s.langVal.ru.type="string"==typeof c?"Single":"Multiply",s.langVal.en.initVal=o,s.langVal.en.additVal=String(o).toUpperCase(),s.langVal.en.type="Single";else{var u=n(c,2),p=u[0],g=u[1],f=n(o,2),h=f[0],y=f[1];Number.isNaN(parseInt(h,10))?void 0===g?(s.key=t.defineSpecElem(h),s.langVal.ru.additVal=p.toUpperCase()):(s.key=t.defineSpecElem(h),s.langVal.ru.additVal=g):(s.key="Digit".concat(h),s.langVal.ru.additVal=g),s.langVal.ru.initVal=p,s.langVal.ru.type="string"==typeof c?"Single":"Multiply",s.langVal.en.initVal=h,s.langVal.en.additVal=y,s.langVal.en.type="Multiply"}l.push(s)}r.push(l)}return r},this.getTypeOfBtn=function(e,t){return"en"===t&&void 0===e.type?e.langVal.en.type:"ru"===t&&void 0===e.type?e.langVal.ru.type:e.type},this.addAdditionalKeyObjects=function(e,t){for(var a=n(e,4),r=a[0],i=a[1],l=a[2],d=a[3],o=[],c=0;c<t.length;c+=1)if(t[c].includes("Arrow")){var s=t[c].trim();switch(s){case"ArrowUp":o.push({key:s,val:"&#8593",type:"Special-letter"});break;case"ArrowDown":o.push({key:s,val:"&#8595",type:"Special-letter"});break;case"ArrowLeft":o.push({key:s,val:"&#8592",type:"Special-letter"});break;case"ArrowRight":o.push({key:s,val:"&#8594",type:"Special-letter"})}}else if("Space"===t[c])o.push({key:t[c].trim(),val:" ",type:"Special-big"});else if(t[c].includes("Shift")||t[c].includes("Alt")||t[c].includes("Control")||t[c].includes("Meta")){var u=t[c].trim();u=u.includes("Shift")?"Shift":u.includes("Alt")?"Alt":u.includes("Control")?"Ctrl":"Win",t[c].includes("ShiftRight")?o.push({key:t[c].trim(),val:u,type:"Special-letter-end"}):o.push({key:t[c].trim(),val:u,type:"Special"})}else o.push({key:t[c].trim(),val:t[c].trim(),type:"Special"});r.push(o[0]),i.unshift(o[1]),i.push(o[2]),l.unshift(o[3]),l.push(o[4]),d.unshift(o[5]),d.push(o[6]),d.push(o[7]);for(var p=[],g=8;g<t.length;g+=1)p.push(o[g]);return e.push(p),e},this.renderKeyboard=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.createElement("div");r.classList.add("keyboard");for(var i=t.addAdditionalKeyObjects(t.getDefKeybrdObjs(t.getKeyboardArrFromStr(t.enPattern),t.getKeyboardArrFromStr(t.ruPattern)),t.getArrFromStr(t.keywords)),l=0;l<i.length;l+=1){var d=document.createElement("div");d.classList.add("row");for(var o={},c=0;c<i[l].length;c+=1){var s=i[l][c];(o=document.createElement("div")).classList.add("btn-key");var u=document.createElement("span");u.classList.add("text");var p=document.createElement("span");switch(p.classList.add("text"),p.classList.add("text_smaller"),p.classList.add("symbol-upper"),t.getTypeOfBtn(s,e)){case"Special-letter-end":o.classList.add("btn-key-word-with-space"),o.classList.add("btn-key-word-with-space_right-shift"),o.id=s.key,u.innerHTML=s.val,o.appendChild(u);break;case"Special-big":o.classList.add("btn-key-big"),o.id=s.key,u.innerHTML=s.val,o.appendChild(u);break;case"Special-letter":o.classList.add("btn-key-letter"),o.id=s.key,u.innerHTML=s.val,o.appendChild(u);break;case"Special":o.classList.add("btn-key-word-with-space"),o.id=s.key,u.innerHTML=s.val,o.appendChild(u);break;case"Single":o.classList.add("btn-key-letter"),o.id=s.key,u.innerHTML=a||n?s.langVal[e].additVal:s.langVal[e].initVal,o.appendChild(u);break;case"Multiply":o.classList.add("btn-key-double-symbol"),o.id=s.key,a?(u.innerHTML=s.langVal[e].additVal,o.appendChild(u)):(u.innerHTML=s.langVal[e].initVal,p.innerHTML=s.langVal[e].additVal,o.appendChild(u),o.appendChild(p))}d.appendChild(o)}r.appendChild(d)}return r},this.addVirtualHandler=function(e){e.lastChild.childNodes.forEach((function(a){a.childNodes.forEach((function(a){a.addEventListener("click",(function(){t.keyDownHandler(a,e),setTimeout(t.keyUpHandler(a,e),200)}))}))}))},this.checkIfKeyboardKey=function(e){return String(e).includes("Digit")||String(e).includes("Key")||t.specialKeys.includes(e)||t.keywords.includes(e)||String(e).includes("Tab")||String(e).includes("Control")||String(e).includes("Alt")||String(e).includes("Shift")},this.changeState=function(e,a){if("Shift"===e){if(t.keyModificator.virtualShift){for(t.keyModificator.virtualShift=!1;a.children.length>1;)a.removeChild(a.lastChild);a.appendChild(t.renderKeyboard(localStorage.getItem("lang")))}else{for(t.keyModificator.virtualShift=!0;a.children.length>1;)a.removeChild(a.lastChild);a.appendChild(t.renderKeyboard(localStorage.getItem("lang"),!0))}t.addVirtualHandler(a)}else if("CapsLock"===e){if(t.keyModificator.capsLock){for(t.keyModificator.capsLock=!1;a.children.length>1;)a.removeChild(a.lastChild);a.appendChild(t.renderKeyboard(localStorage.getItem("lang")))}else{for(t.keyModificator.capsLock=!0;a.children.length>1;)a.removeChild(a.lastChild);a.appendChild(t.renderKeyboard(localStorage.getItem("lang"),!1,!0))}t.addVirtualHandler(a)}},this.keyUpHandler=function(e,a){var n=!0,r=e.id;if(void 0!==e.code&&(r=e.code,n=!1),t.checkIfKeyboardKey(r))if(n){if(!r.includes("Shift")&&!r.includes("CapsLock")){var i=document.getElementById(r);setTimeout((function(){i.classList.remove("btn-key_active")}),100)}}else{if(r.includes("Shift")){for(;a.children.length>1;)a.removeChild(a.lastChild);a.appendChild(t.renderKeyboard(localStorage.getItem("lang"),!1)),t.addVirtualHandler(a)}else String(r).includes("Control")?t.keyModificator.ctrl=!1:String(r).includes("Alt")&&(t.keyModificator.alt=!1);if(!String(r).includes("CapsLock")){var l=document.getElementById(r);setTimeout((function(){l.classList.remove("btn-key_active")}),100)}}},this.keyDownHandler=function(e,a){var n=document.getElementById("textarea"),r=e.id,i=!0;if(n.focus(),void 0!==e.code&&(r=e.code,i=!1),t.checkIfKeyboardKey(r)){if(String(r).includes("Digit")||String(r).includes("Key")||t.specialKeys.includes(r)||String(r).includes("Tab"))i||e.preventDefault(),r.includes("Tab")?n.value+="\t":n.value+=document.getElementById(r).children.item(0).innerHTML;else if(r.includes("Shift")&&!i){for(;a.children.length>1;)a.removeChild(a.lastChild);a.appendChild(t.renderKeyboard(localStorage.getItem("lang"),!0)),t.addVirtualHandler(a)}else if(r.includes("Shift")&&i)t.changeState("Shift",a);else if(r.includes("Space")&&i)n.value+=" ";else if(r.includes("Lang")){for(;a.children.length>1;)a.removeChild(a.lastChild);t.toggleLang(localStorage.getItem("lang")),a.appendChild(t.renderKeyboard(localStorage.getItem("lang"))),t.addVirtualHandler(a)}else r.includes("CapsLock")?t.changeState("CapsLock",a):String(r).includes("Control")?t.keyModificator.ctrl=!0:String(r).includes("Alt")&&(i||e.preventDefault(),t.keyModificator.alt=!0);if(t.keyModificator.alt&&t.keyModificator.ctrl){for(t.toggleLang(localStorage.getItem("lang"));a.children.length>1;)a.removeChild(a.lastChild);a.appendChild(t.renderKeyboard(localStorage.getItem("lang"))),t.addVirtualHandler(a)}var l=document.getElementById(r);r.includes("Shift")&&i&&!t.keyModificator.virtualShift||r.includes("CapsLock")&&!t.keyModificator.capsLock?l.classList.remove("btn-key_active"):l.classList.add("btn-key_active")}},this.toggleLang=function(e){"en"===e?localStorage.setItem("lang","ru"):localStorage.setItem("lang","en")}};window.onload=function(){0===localStorage.getItem("lang").length&&localStorage.setItem("lang","en");var e=document.body,t=document.createElement("div");t.classList.add("container");var a=document.createElement("div");a.classList.add("textarea-wrapper");var n=document.createElement("textarea");n.id="textarea",n.classList.add("textarea-wrapper__textarea"),a.appendChild(n),t.appendChild(a),t.appendChild(r.renderKeyboard(localStorage.getItem("lang"))),document.addEventListener("keydown",(function(e){r.keyDownHandler(e,t)})),document.addEventListener("keyup",(function(e){r.keyUpHandler(e,t)})),r.addVirtualHandler(t),e.appendChild(t)}}]);